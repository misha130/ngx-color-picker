{"version":3,"file":"helpers.js","sourceRoot":"","sources":["../../src/lib/helpers.ts"],"names":[],"mappings":"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","sourcesContent":["import { Directive, Input, Output, EventEmitter, HostListener, ElementRef } from '@angular/core';\r\n\r\nexport function detectIE() {\r\n  let ua = '';\r\n\r\n  if (typeof navigator !== 'undefined') {\r\n    ua = navigator.userAgent.toLowerCase();\r\n  }\r\n\r\n  const msie = ua.indexOf('msie ');\r\n\r\n  if (msie > 0) {\r\n    // IE 10 or older => return version number\r\n    return parseInt(ua.substring(msie + 5, ua.indexOf('.', msie)), 10);\r\n  }\r\n\r\n  // Other browser\r\n  return false;\r\n}\r\n\r\n@Directive({\r\n  selector: '[text]'\r\n})\r\nexport class TextDirective {\r\n  @Input() rg: number;\r\n  @Input() text: any;\r\n\r\n  @Output() newValue = new EventEmitter<any>();\r\n\r\n  @HostListener('input', ['$event']) inputChange(event: any) {\r\n    const value = event.target.value;\r\n\r\n    if (this.rg === undefined) {\r\n      this.newValue.emit(value);\r\n    } else {\r\n      const numeric = parseFloat(value);\r\n\r\n      if (!isNaN(numeric) && numeric >= 0 && numeric <= this.rg) {\r\n        this.newValue.emit({ v: numeric, rg: this.rg });\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n@Directive({\r\n  selector: '[slider]'\r\n})\r\nexport class SliderDirective {\r\n  private listenerMove: any;\r\n  private listenerStop: any;\r\n\r\n  @Input() rgX: number;\r\n  @Input() rgY: number;\r\n\r\n  @Input() slider: string;\r\n\r\n  @Output() dragEnd = new EventEmitter();\r\n  @Output() dragStart = new EventEmitter();\r\n\r\n  @Output() newValue = new EventEmitter<any>();\r\n\r\n  @HostListener('mousedown', ['$event']) mouseDown(event: any) {\r\n    this.start(event);\r\n  }\r\n\r\n  @HostListener('touchstart', ['$event']) touchStart(event: any) {\r\n    this.start(event);\r\n  }\r\n\r\n  constructor(private elRef: ElementRef) {\r\n    this.listenerMove = (event: any) => this.move(event);\r\n\r\n    this.listenerStop = () => this.stop();\r\n  }\r\n\r\n  private move(event: any) {\r\n    event.preventDefault();\r\n\r\n    this.setCursor(event);\r\n  }\r\n\r\n  private start(event: any) {\r\n    this.setCursor(event);\r\n\r\n    document.addEventListener('mouseup', this.listenerStop);\r\n    document.addEventListener('touchend', this.listenerStop);\r\n    document.addEventListener('mousemove', this.listenerMove);\r\n    document.addEventListener('touchmove', this.listenerMove);\r\n\r\n    this.dragStart.emit();\r\n  }\r\n\r\n  private stop() {\r\n    document.removeEventListener('mouseup', this.listenerStop);\r\n    document.removeEventListener('touchend', this.listenerStop);\r\n    document.removeEventListener('mousemove', this.listenerMove);\r\n    document.removeEventListener('touchmove', this.listenerMove);\r\n\r\n    this.dragEnd.emit();\r\n  }\r\n\r\n  private getX(event: any): number {\r\n    const position = this.elRef.nativeElement.getBoundingClientRect();\r\n\r\n    const pageX = (event.pageX !== undefined) ? event.pageX : event.touches[0].pageX;\r\n\r\n    return pageX - position.left - window.pageXOffset;\r\n  }\r\n\r\n  private getY(event: any): number {\r\n    const position = this.elRef.nativeElement.getBoundingClientRect();\r\n\r\n    const pageY = (event.pageY !== undefined) ? event.pageY : event.touches[0].pageY;\r\n\r\n    return pageY - position.top - window.pageYOffset;\r\n  }\r\n\r\n  private setCursor(event: any) {\r\n    const width = this.elRef.nativeElement.offsetWidth;\r\n    const height = this.elRef.nativeElement.offsetHeight;\r\n\r\n    const x = Math.max(0, Math.min(this.getX(event), width));\r\n    const y = Math.max(0, Math.min(this.getY(event), height));\r\n\r\n    if (this.rgX !== undefined && this.rgY !== undefined) {\r\n      this.newValue.emit({ s: x / width, v: (1 - y / height), rgX: this.rgX, rgY: this.rgY });\r\n    } else if (this.rgX === undefined && this.rgY !== undefined) {\r\n      this.newValue.emit({ v: y / height, rgY: this.rgY });\r\n    } else if (this.rgX !== undefined && this.rgY === undefined) {\r\n      this.newValue.emit({ v: x / width, rgX: this.rgX });\r\n    }\r\n  }\r\n}\r\n\r\nexport class SliderPosition {\r\n  constructor(public h: number, public s: number, public v: number, public a: number) {}\r\n}\r\n\r\nexport class SliderDimension {\r\n  constructor(public h: number, public s: number, public v: number, public a: number) {}\r\n}\r\n"]}